<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Relat√≥rio Geral ‚Äî Alunos | Professores | Cursos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --primary:#5a60ea; --primary-600:#3f45c4;
      --danger:#e74c3c; --danger-600:#c0392b;
      --bg:#f4f6f9; --text:#1f2430; --muted:#6b7280;
      --surface:#ffffff; --surface-2:#f8f9ff; --line:#eef1f6;
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text)}
    .wrap{max-width:1120px; margin:34px auto; padding:0 16px}
    .card{background:var(--surface); border-radius:var(--radius); box-shadow:0 14px 36px rgba(0,0,0,.08)}
    .header{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:18px 20px}
    .title{margin:0; color:var(--primary); font-size:24px}
    .subtitle{margin:0; color:var(--muted); font-size:12px}
    .btn{appearance:none; border:0; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; transition:background .2s ease, transform .06s ease}
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:var(--primary); color:#fff}
    .btn-primary:hover{background:var(--primary-600)}
    .btn-ghost{background:#eef1f6; color:#111827}
    .btn-ghost:hover{background:#e5e7eb}
    .btn-danger{background:var(--danger); color:#fff}
    .btn-danger:hover{background:var(--danger-600)}

    .tabs{margin-top:10px}
    .tab-head{display:flex; gap:8px; flex-wrap:wrap; padding:10px; border-bottom:1px solid var(--line)}
    .tab-btn{padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; background:#f3f4f6; color:#111827; border:1px solid transparent}
    .tab-btn.active{background:var(--primary); color:#fff}
    .pane{display:none; padding:16px}
    .pane.active{display:block; animation:fade .25s ease}
    @keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)}}

    .toolbar{display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px}
    .search{position:relative; flex:1 1 320px; max-width:520px}
    .search input{
      width:100%; padding:12px 14px 12px 42px; border:1px solid var(--line); border-radius:10px; font-size:14px;
      background:#fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="%236b7280"><path d="M21.53 20.47l-3.66-3.66A8.5 8.5 0 1017.5 19l3.66 3.66a.75.75 0 101.06-1.06zM4 10.5a6.5 6.5 0 1111.32 4.13A6.5 6.5 0 014 10.5z"/></svg>') no-repeat 12px center;
      background-size:18px;
      transition:box-shadow .2s ease, border-color .2s ease;
    }
    .search input:focus{outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(90,96,234,.15)}
    .hint{color:var(--muted); font-size:12px}

    .table-wrap{border:1px solid var(--line); border-radius:12px; overflow:hidden}
    table{width:100%; border-collapse:separate; border-spacing:0}
    thead th{
      position:sticky; top:0; z-index:1; background:var(--surface-2); color:#374151; font-weight:700; font-size:13px;
      text-align:left; padding:12px 10px; border-bottom:1px solid var(--line);
    }
    tbody td{padding:12px 10px; border-bottom:1px solid var(--line); font-size:14px; vertical-align:middle}
    tbody tr:hover{background:#fafbff}
    .badge{display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; background:#eef2ff; color:#3730a3}
    .actions{display:flex; gap:8px}
    .stats{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px; margin-top:12px}
    .stat{background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px 12px; font-size:14px; box-shadow:0 8px 18px rgba(0,0,0,.05)}

    .footer{padding:16px; display:flex; justify-content:center}
    .toast{
      position:fixed; top:16px; right:16px; background:#111827; color:#fff; padding:10px 14px; border-radius:10px;
      font-size:13px; box-shadow:0 10px 30px rgba(0,0,0,.25); opacity:0; transform:translateY(-10px); pointer-events:none
    }
    .toast.show{opacity:1; transform:translateY(0); transition:all .25s ease}

    @media (max-width:760px){
      thead th:nth-child(3), tbody td:nth-child(3){display:none} /* esconde e-mail em telas menores */
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div>
          <h1 class="title">Relat√≥rio geral</h1>
          <p class="subtitle">Alunos ‚Ä¢ Professores ‚Ä¢ Cursos ‚Äî filtre, veja estat√≠sticas e gerencie registros</p>
        </div>
        <div style="display:flex; gap:8px">
          <button class="btn btn-ghost" onclick="limparTudo()">Limpar tudo</button>
          <button class="btn btn-primary" onclick="voltarCadastro()">‚Üê Voltar para cadastro</button>
        </div>
      </div>

      <div class="tabs">
        <div class="tab-head">
          <button id="tab-alunos" class="tab-btn active" onclick="abrirAba(this,'alunos')">üë®‚Äçüéì Alunos</button>
          <button id="tab-professores" class="tab-btn" onclick="abrirAba(this,'professores')">üë©‚Äçüè´ Professores</button>
          <button id="tab-cursos" class="tab-btn" onclick="abrirAba(this,'cursos')">üìö Cursos</button>
        </div>

        <!-- Alunos -->
        <section id="pane-alunos" class="pane active">
          <div class="toolbar">
            <div class="search">
              <input type="search" id="filtroAlunos" placeholder="Buscar por nome, e-mail, faculdade, mat√©ria ou CPF..." />
            </div>
            <span class="hint">M√©dia e quantidade atualizam com o filtro.</span>
          </div>
          <div class="table-wrap">
            <table aria-label="Tabela de alunos">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>CPF</th>
                  <th>E-mail</th>
                  <th>Faculdade</th>
                  <th>Mat√©ria</th>
                  <th>Nota</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tabelaAlunos"></tbody>
            </table>
          </div>
          <div class="stats">
            <div class="stat" id="statAlunosTotal">Total de alunos: 0</div>
            <div class="stat" id="statAlunosMedia">M√©dia das notas: 0,00</div>
          </div>
        </section>

        <!-- Professores -->
        <section id="pane-professores" class="pane">
          <div class="toolbar">
            <div class="search">
              <input type="search" id="filtroProfessores" placeholder="Buscar por nome, e-mail, CPF ou departamento..." />
            </div>
            <span class="hint">Gerencie a lista de professores.</span>
          </div>
          <div class="table-wrap">
            <table aria-label="Tabela de professores">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>CPF</th>
                  <th>E-mail</th>
                  <th>Departamento</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tabelaProfessores"></tbody>
            </table>
          </div>
          <div class="stats">
            <div class="stat" id="statProfTotal">Total de professores: 0</div>
          </div>
        </section>

        <!-- Cursos -->
        <section id="pane-cursos" class="pane">
          <div class="toolbar">
            <div class="search">
              <input type="search" id="filtroCursos" placeholder="Buscar por curso, professor respons√°vel ou aluno..." />
            </div>
            <span class="hint">Veja tamb√©m a quantidade de alunos por curso.</span>
          </div>
          <div class="table-wrap">
            <table aria-label="Tabela de cursos">
              <thead>
                <tr>
                  <th>Curso</th>
                  <th>Professor respons√°vel</th>
                  <th>Alunos</th>
                  <th>Qtd</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="tabelaCursos"></tbody>
            </table>
          </div>
          <div class="stats">
            <div class="stat" id="statCursosTotal">Total de cursos: 0</div>
            <div class="stat" id="statCursosAlunos">Total de alunos em cursos: 0</div>
          </div>
        </section>
      </div>

      <div class="footer">
        <button class="btn btn-primary" onclick="voltarCadastro()">‚Üê Voltar para cadastro</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // Estado
    let alunos = [];
    let professores = [];
    let cursos = [];

    // Utilidades
    const $ = (id)=> document.getElementById(id);
    function toast(msg){
      const t = $("toast"); t.textContent = msg; t.classList.add("show");
      setTimeout(()=> t.classList.remove("show"), 1800);
    }
    function formatCPF(cpf){
      const v = String(cpf||"").replace(/\D/g,"").slice(0,11);
      return v
        .replace(/(\d{3})(\d)/,"$1.$2")
        .replace(/(\d{3})(\d)/,"$1.$2")
        .replace(/(\d{3})(\d{1,2})$/,"$1-$2");
    }

    // Persist√™ncia
    function carregar(){
      try{
        alunos = JSON.parse(localStorage.getItem("alunos")) || [];
        professores = JSON.parse(localStorage.getItem("professores")) || [];
        cursos = JSON.parse(localStorage.getItem("cursos")) || [];
      }catch(e){
        alunos = []; professores = []; cursos = [];
        toast("Erro ao carregar dados.");
      }
    }
    function salvar(){
      localStorage.setItem("alunos", JSON.stringify(alunos));
      localStorage.setItem("professores", JSON.stringify(professores));
      localStorage.setItem("cursos", JSON.stringify(cursos));
    }
    function limparTudo(){
      if(confirm("Tem certeza que deseja limpar todos os dados?")){
        alunos = []; professores = []; cursos = [];
        salvar();
        renderTudo();
        toast("Todos os dados foram limpos.");
      }
    }

    // Navega√ß√£o
    function abrirAba(btn, nome){
      document.querySelectorAll(".tab-btn").forEach(b=> b.classList.remove("active"));
      document.querySelectorAll(".pane").forEach(p=> p.classList.remove("active"));
      btn.classList.add("active");
      $(`pane-${nome}`).classList.add("active");
      renderTudo();
    }
    function voltarCadastro(){
      window.location.href = "cadastro.html";
    }

    // Renderiza√ß√µes
    function renderAlunos(lista = alunos){
      const tb = $("tabelaAlunos"); tb.innerHTML = "";
      lista.forEach((a, idx)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${a.nome||""}</td>
          <td>${formatCPF(a.cpf)}</td>
          <td>${a.email||""}</td>
          <td>${a.faculdade||""}</td>
          <td>${a.materia||""}</td>
          <td><span class="badge">${Number(a.nota??0).toFixed(1)}</span></td>
          <td class="actions">
            <button class="btn btn-danger" onclick="apagar('alunos', ${idx})">Apagar</button>
          </td>
        `;
        tb.appendChild(tr);
      });
      const qtd = lista.length;
      const media = qtd ? (lista.reduce((s,a)=> s + Number(a.nota||0), 0) / qtd) : 0;
      $("statAlunosTotal").textContent = `Total de alunos: ${qtd}`;
      $("statAlunosMedia").textContent = `M√©dia das notas: ${media.toFixed(2)}`;
    }

    function renderProfessores(lista = professores){
      const tb = $("tabelaProfessores"); tb.innerHTML = "";
      lista.forEach((p, idx)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${p.nome||""}</td>
          <td>${formatCPF(p.cpf)}</td>
          <td>${p.email||""}</td>
          <td>${p.departamento||""}</td>
          <td class="actions">
            <button class="btn btn-danger" onclick="apagar('professores', ${idx})">Apagar</button>
          </td>
        `;
        tb.appendChild(tr);
      });
      $("statProfTotal").textContent = `Total de professores: ${lista.length}`;
    }

    function renderCursos(lista = cursos){
      const tb = $("tabelaCursos"); tb.innerHTML = "";
      let totalAlunosCursos = 0;
      lista.forEach((c, idx)=>{
        const nomesAlunos = Array.isArray(c.alunos) ? c.alunos : [];
        totalAlunosCursos += nomesAlunos.length;
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${c.nome||""}</td>
          <td>${c.professorResponsavel||""}</td>
          <td>${nomesAlunos.join(", ")}</td>
          <td><span class="badge">${nomesAlunos.length}</span></td>
          <td class="actions">
            <button class="btn btn-danger" onclick="apagar('cursos', ${idx})">Apagar</button>
          </td>
        `;
        tb.appendChild(tr);
      });
      $("statCursosTotal").textContent = `Total de cursos: ${lista.length}`;
      $("statCursosAlunos").textContent = `Total de alunos em cursos: ${totalAlunosCursos}`;
    }

    // Filtros e render geral
    function aplicarFiltros(){
      const qAlunos = ($("filtroAlunos").value || "").toLowerCase().trim();
      const qProfs  = ($("filtroProfessores").value || "").toLowerCase().trim();
      const qCursos = ($("filtroCursos").value || "").toLowerCase().trim();

      const alunosFil = qAlunos ? alunos.filter(a =>
        (a.nome||"").toLowerCase().includes(qAlunos) ||
        (a.email||"").toLowerCase().includes(qAlunos) ||
        (a.faculdade||"").toLowerCase().includes(qAlunos) ||
        (a.materia||"").toLowerCase().includes(qAlunos) ||
        String(a.cpf||"").toLowerCase().includes(qAlunos)
      ) : alunos;

      const profsFil = qProfs ? professores.filter(p =>
        (p.nome||"").toLowerCase().includes(qProfs) ||
        (p.email||"").toLowerCase().includes(qProfs) ||
        (p.departamento||"").toLowerCase().includes(qProfs) ||
        String(p.cpf||"").toLowerCase().includes(qProfs)
      ) : professores;

      const cursosFil = qCursos ? cursos.filter(c => {
        const alunosStr = Array.isArray(c.alunos) ? c.alunos.join(" ").toLowerCase() : "";
        return (c.nome||"").toLowerCase().includes(qCursos) ||
               (c.professorResponsavel||"").toLowerCase().includes(qCursos) ||
               alunosStr.includes(qCursos);
      }) : cursos;

      renderAlunos(alunosFil);
      renderProfessores(profsFil);
      renderCursos(cursosFil);
    }

    function renderTudo(){
      aplicarFiltros();
    }

    // A√ß√µes
    function apagar(tipo, index){
      if(!confirm("Tem certeza que deseja apagar este registro?")) return;
      if(tipo==="alunos"){ alunos.splice(index,1); }
      if(tipo==="professores"){ professores.splice(index,1); }
      if(tipo==="cursos"){ cursos.splice(index,1); }
      salvar();
      renderTudo();
      toast("Registro apagado.");
    }

    // Eventos
    function bindEventos(){
      $("filtroAlunos").addEventListener("input", aplicarFiltros);
      $("filtroProfessores").addEventListener("input", aplicarFiltros);
      $("filtroCursos").addEventListener("input", aplicarFiltros);
    }

    // Inicializa√ß√£o
    (function init(){
      carregar();
      bindEventos();
      renderTudo();
    })();
  </script>
</body>
</html>
```